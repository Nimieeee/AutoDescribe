"use strict";exports.id=767,exports.ids=[767],exports.modules={7767:(e,t,s)=>{s.d(t,{_:()=>useKPITracking});let ClientKPITracker=class ClientKPITracker{constructor(){this.eventQueue=[],this.isTracking=!0,this.sessionId=this.getOrCreateSessionId(),this.startTime=Date.now(),this.setupEventListeners()}getOrCreateSessionId(){return"ssr-session"}setupEventListeners(){}trackPageView(){}trackUserInteraction(e,t,s={}){}trackSearch(e,t,s){this.trackEvent({type:"search",timestamp:new Date,sessionId:this.sessionId,metadata:{query:e.length>50?`${e.substring(0,50)}...`:e,query_length:e.length,results_count:t,response_time_ms:s,has_results:t>0}})}trackGenerationRequest(e,t){this.trackEvent({type:"generation_request",timestamp:new Date,sessionId:this.sessionId,metadata:{sku:e,content_type:t,page:"unknown"}})}trackEvent(e){this.isTracking&&(this.eventQueue.push(e),this.eventQueue.length>=10&&this.flushEvents())}async flushEvents(){if(0===this.eventQueue.length)return;let e=[...this.eventQueue];this.eventQueue=[];try{await fetch("/api/kpi/client-events",{method:"POST",headers:{"Content-Type":"application/json","X-Session-ID":this.sessionId},body:JSON.stringify({events:e})}),console.log(`ðŸ“Š Sent ${e.length} client KPI events`)}catch(t){console.error("Error sending KPI events:",t),this.eventQueue.unshift(...e)}}setTracking(e){this.isTracking=e,e?console.log("\uD83D\uDCCA KPI tracking enabled"):console.log("\uD83D\uDCCA KPI tracking disabled")}getSessionInfo(){return{sessionId:this.sessionId,startTime:this.startTime,queueLength:this.eventQueue.length,isTracking:this.isTracking}}};let n=null;function getKPITracker(){return n||(n=new ClientKPITracker),n}function useKPITracking(){let e=getKPITracker();return{trackPageView:()=>e.trackPageView(),trackUserInteraction:(t,s,n)=>e.trackUserInteraction(t,s,n),trackSearch:(t,s,n)=>e.trackSearch(t,s,n),trackGenerationRequest:(t,s)=>e.trackGenerationRequest(t,s),flushEvents:()=>e.flushEvents(),setTracking:t=>e.setTracking(t),getSessionInfo:()=>e.getSessionInfo()}}}};