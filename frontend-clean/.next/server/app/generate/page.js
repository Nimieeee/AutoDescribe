(()=>{var e={};e.id=811,e.ids=[811],e.modules={2213:e=>{function webpackEmptyContext(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=2213,e.exports=webpackEmptyContext},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6189:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>i,routeModule:()=>p,tree:()=>d});var s=r(7096),a=r(6132),n=r(7284),o=r.n(n),c=r(2564),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);r.d(t,l);let d=["",{children:["generate",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6428)),"/Users/mac/Desktop/AutoDescribe/frontend-clean/src/app/generate/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5979)),"/Users/mac/Desktop/AutoDescribe/frontend-clean/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],i=["/Users/mac/Desktop/AutoDescribe/frontend-clean/src/app/generate/page.tsx"],u="/generate/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/generate/page",pathname:"/generate",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8959:(e,t,r)=>{Promise.resolve().then(r.bind(r,1487))},1487:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>GeneratePage});var s=r(784),a=r(9885),n=r(5413);let CSVRAGService=class CSVRAGService{constructor(){this.apiUrl="http://localhost:3000"}async generateContentWithRAG(e,t="description",r){try{let s=await fetch(`${this.apiUrl}/api/generate-with-rag`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sku:e,content_type:t,custom_prompt:r})}),a=await s.json();if(!s.ok)return{success:!1,error:a.error||"Failed to generate content"};return{success:!0,content:a.generated_text,ragContext:a.rag_context}}catch(e){return console.error("RAG generation error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async searchProducts(e,t=10){try{let r=await fetch(`${this.apiUrl}/api/search-products?q=${encodeURIComponent(e)}&limit=${t}`);if(!r.ok)throw Error("Failed to search products");let s=await r.json();return s.products||[]}catch(e){return console.error("Product search error:",e),[]}}async getProductBySku(e){try{let t=await fetch(`${this.apiUrl}/api/product/${e}`);if(!t.ok)return null;let r=await t.json();return r.product||null}catch(e){return console.error("Get product error:",e),null}}};let o=new CSVRAGService;var c=r(7767);function GeneratePage(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)("description"),[d,i]=(0,a.useState)(""),[u,x]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(null),[b,y]=(0,a.useState)(""),[f,j]=(0,a.useState)([]),[v,w]=(0,a.useState)(!1),{trackPageView:N,trackSearch:C,trackGenerationRequest:_,trackUserInteraction:k}=(0,c._)();(0,a.useEffect)(()=>{N()},[]);let handleSearch=async e=>{if(!e.trim()){j([]);return}w(!0);let t=Date.now();try{let r=await o.searchProducts(e,10);j(r);let s=Date.now()-t;C(e,r.length,s)}catch(e){console.error("Search error:",e)}finally{w(!1)}},selectProduct=e=>{t(e.sku),j([]),y(""),k("select","product_search_result",{sku:e.sku,product_name:e.name})},handleGenerate=async()=>{if(!e.trim()){g("Please enter a product SKU");return}x(!0),g(null),m(null),_(e,r);try{let t=await o.generateContentWithRAG(e,r,d);if(!t.success)throw Error(t.error||"Failed to generate content");let{data:s}=await n.O.from("generated_content").select(`
          *,
          products (sku, name, brand)
        `).eq("generated_text",t.content).order("created_at",{ascending:!1}).limit(1).single();m({...s,rag_context:t.ragContext})}catch(e){g(e.message)}finally{x(!1)}};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Generate Descriptions"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Create AI-powered product descriptions with AutoDescribe"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Content Generation"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Products (CSV Data)"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:b,onChange:e=>y(e.target.value),placeholder:"Search by name, brand, or category...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:e=>"Enter"===e.key&&handleSearch(b)}),s.jsx("button",{onClick:()=>handleSearch(b),disabled:v,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:bg-gray-400",children:v?"...":"Search"})]}),f.length>0&&s.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:f.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>selectProduct(e),className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[s.jsx("div",{className:"font-medium text-sm",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["SKU: ",e.sku," | Brand: ",e.brandName," | Category: ",e.primary_category]})]},t))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product SKU"}),s.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter SKU or search above (e.g., B00GS8W3T4)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Type"}),(0,s.jsxs)("select",{value:r,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"description",children:"Product Description"}),s.jsx("option",{value:"features",children:"Feature List"}),s.jsx("option",{value:"benefits",children:"Benefits Summary"}),s.jsx("option",{value:"seo",children:"SEO Content"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Instructions (Optional)"}),s.jsx("textarea",{value:d,onChange:e=>i(e.target.value),placeholder:"Add specific requirements or focus areas...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("button",{onClick:handleGenerate,disabled:u,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed",children:u?"Generating with CSV Context...":"Generate Content with RAG"}),h&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Generated Content"}),p?(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-md",children:s.jsx("p",{className:"text-green-800 text-sm font-medium",children:"✅ Content generated successfully and saved to review queue!"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Product"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[p.products?.name," (SKU: ",p.products?.sku,")"]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Generated Text"}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-md border",children:s.jsx("div",{className:"text-gray-900 whitespace-pre-wrap text-sm leading-relaxed",children:p.generated_text})})]}),p.seo_keywords&&p.seo_keywords.length>0&&(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"SEO Keywords"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:p.seo_keywords.map((e,t)=>s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e},t))})]}),p.rag_context&&(0,s.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[s.jsx("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"\uD83E\uDDE0 CSV RAG Context Used"}),(0,s.jsxs)("div",{className:"text-xs text-green-700 space-y-1",children:[(0,s.jsxs)("p",{children:["✅ Target Product: ",p.rag_context.targetProduct.name]}),(0,s.jsxs)("p",{children:["\uD83D\uDCCA Similar Products: ",p.rag_context.similarProducts.length," found"]}),(0,s.jsxs)("p",{children:["\uD83C\uDFF7️ Category Products: ",p.rag_context.categoryProducts.length," found"]}),(0,s.jsxs)("p",{children:["\uD83D\uDD0D Brand Products: ",p.rag_context.brandProducts.length," found"]}),s.jsx("p",{children:"\uD83D\uDCDD Context generated from your CSV product database"})]})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsx("a",{href:"/review",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700",children:"\uD83D\uDCCB Go to Review Queue"})})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"✨"}),s.jsx("p",{className:"text-gray-500",children:"Generated content will appear here"})]})]})]})]})}},5413:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});var s=r(6315);let a=(0,s.createClient)("https://aulrmuonepdwxklhcaez.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF1bHJtdW9uZXBkd3hrbGhjYWV6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxMDUxOTIsImV4cCI6MjA3MTY4MTE5Mn0.oiaXgNNXx5U6rcZmxqT1gOTQqtVIUCSjMRr7AUTQM8Q")},6428:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>l});var s=r(5153);let a=(0,s.createProxy)(String.raw`/Users/mac/Desktop/AutoDescribe/frontend-clean/src/app/generate/page.tsx`),{__esModule:n,$$typeof:o}=a,c=a.default,l=c}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[299,315,50,767],()=>__webpack_exec__(6189));module.exports=r})();