(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{4362:function(e,s,t){Promise.resolve().then(t.bind(t,8397))},8397:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ReviewPage}});var a=t(7437),r=t(2265),l=t(7823);function ReviewPage(){var e,s,t;let[d,n]=(0,r.useState)(!1),[c,i]=(0,r.useState)(""),[o,x]=(0,r.useState)([]),[u,m]=(0,r.useState)(null),[h,g]=(0,r.useState)("pending"),[b,p]=(0,r.useState)(!0),[y,j]=(0,r.useState)(!1),[v,f]=(0,r.useState)(""),[N,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("review-auth");"atdb-465@"===e?(n(!0),loadContent()):p(!1)},[]);let handleLogin=()=>{"atdb-465@"===c?(n(!0),localStorage.setItem("review-auth",c),loadContent()):alert("Incorrect password")},loadContent=async()=>{try{let{data:e,error:s}=await l.O.from("generated_content").select("\n          *,\n          products (sku, name, brand, category)\n        ").order("created_at",{ascending:!1});if(s){console.error("Error loading content:",s);return}x(e||[])}catch(e){console.error("Error loading content:",e)}finally{p(!1)}},updateStatus=async(e,s)=>{try{let{error:t}=await l.O.from("generated_content").update({status:s,updated_at:new Date().toISOString()}).eq("id",e);if(t){console.error("Error updating status:",t);return}x(t=>t.map(t=>t.id===e?{...t,status:s}:t)),(null==u?void 0:u.id)===e&&m(null)}catch(e){console.error("Error updating status:",e)}},saveEdit=async()=>{if(u)try{let{error:e}=await l.O.from("generated_content").update({edited_text:v,updated_at:new Date().toISOString()}).eq("id",u.id);if(e){console.error("Error saving edit:",e),alert("Error saving changes: "+e.message);return}x(e=>e.map(e=>e.id===u.id?{...e,edited_text:v}:e)),m({...u,edited_text:v}),j(!1),alert("Changes saved successfully!")}catch(e){console.error("Error saving edit:",e),alert("Error saving changes. Please try again.")}},D=o.filter(e=>"all"===h||e.status===h),getStatusColor=e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},getStatusIcon=e=>{switch(e){case"approved":return"✅";case"rejected":return"❌";default:return"⏳"}};return d?b?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"AutoDescribe Review Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Review, edit, and approve AI-generated descriptions"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:loadContent,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"\uD83D\uDD04 Refresh"}),(0,a.jsx)("button",{onClick:()=>{n(!1),localStorage.removeItem("review-auth"),i("")},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"\uD83D\uDD12 Logout"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review Queue"}),(0,a.jsx)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:["all","pending","approved","rejected"].map(e=>(0,a.jsx)("button",{onClick:()=>g(e),className:"flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat(h===e?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===D.length?(0,a.jsx)("div",{className:"p-6 text-center text-gray-500",children:"pending"===h?"No pending items":"No ".concat(h," items")}):D.map(e=>{var s,t;return(0,a.jsxs)("div",{onClick:()=>m(e),className:"p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ".concat((null==u?void 0:u.id)===e.id?"bg-blue-50 border-blue-200":""),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(getStatusColor(e.status)),children:[getStatusIcon(e.status)," ",e.status]}),e.quality_score&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Score: ",Math.round(100*e.quality_score),"%"]})]}),(0,a.jsx)("h3",{className:"font-medium text-sm text-gray-900 mb-1",children:(null===(s=e.products)||void 0===s?void 0:s.name)||"Unknown Product"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",null===(t=e.products)||void 0===t?void 0:t.sku," • ",e.content_type]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.created_at).toLocaleDateString()})]},e.id)})})]}),(0,a.jsx)("div",{className:"lg:col-span-2 bg-white rounded-lg shadow",children:u?(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:(null===(e=u.products)||void 0===e?void 0:e.name)||"Unknown Product"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["SKU: ",null===(s=u.products)||void 0===s?void 0:s.sku," • ",u.content_type]})]}),(0,a.jsxs)("span",{className:"px-3 py-1 text-sm rounded-full ".concat(getStatusColor(u.status)),children:[getStatusIcon(u.status)," ",u.status]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:u.edited_text?"Edited Content":"Generated Content"}),!y&&(0,a.jsx)("button",{onClick:()=>{u&&(f(u.edited_text||u.generated_text),j(!0))},className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"✏️ Edit"})]}),y?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("textarea",{value:v,onChange:e=>f(e.target.value),className:"w-full h-64 p-4 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Edit the content..."}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:saveEdit,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm",children:"\uD83D\uDCBE Save Changes"}),(0,a.jsx)("button",{onClick:()=>{j(!1),f("")},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm",children:"❌ Cancel"})]})]}):(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-md border",children:[(0,a.jsx)("div",{className:"text-gray-900 whitespace-pre-wrap leading-relaxed",children:u.edited_text||u.generated_text}),u.edited_text&&(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,a.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"✏️ This content has been edited"})})]})]}),u.seo_keywords&&u.seo_keywords.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"SEO Keywords"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:u.seo_keywords.map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e},s))})]}),u.quality_score&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Quality Score"}),(0,a.jsx)("button",{onClick:()=>w(!N),className:"text-xs text-blue-600 hover:text-blue-800",children:N?"\uD83D\uDD3C Hide Details":"\uD83D\uDD3D Show Details"})]}),(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"h-3 rounded-full ".concat(u.quality_score>=.9?"bg-green-500":u.quality_score>=.7?"bg-blue-500":u.quality_score>=.4?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(100*u.quality_score,"%")}})}),(0,a.jsxs)("span",{className:"ml-3 text-sm font-semibold text-gray-900",children:[Math.round(100*u.quality_score),"%"]})]}),N&&(null===(t=u.metadata)||void 0===t?void 0:t.score_breakdown)&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-md p-4 space-y-3",children:[(0,a.jsx)("h4",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"\uD83D\uDCCA 5-Dimensional Scoring System"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"\uD83D\uDD0D Clarity"}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[u.metadata.score_breakdown.clarity||0,"/2"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"bg-blue-500 h-1.5 rounded-full",style:{width:"".concat((u.metadata.score_breakdown.clarity||0)/2*100,"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"✂️ Conciseness"}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[u.metadata.score_breakdown.conciseness||0,"/2"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:"".concat((u.metadata.score_breakdown.conciseness||0)/2*100,"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"⚠️ Accuracy"}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[u.metadata.score_breakdown.technicalAccuracy||0,"/2"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"bg-yellow-500 h-1.5 rounded-full",style:{width:"".concat((u.metadata.score_breakdown.technicalAccuracy||0)/2*100,"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"\uD83D\uDC54 Professional Tone"}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[u.metadata.score_breakdown.professionalTone||0,"/2"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"bg-purple-500 h-1.5 rounded-full",style:{width:"".concat((u.metadata.score_breakdown.professionalTone||0)/2*100,"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"\uD83C\uDFAF SEO & Engagement"}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[u.metadata.score_breakdown.seoEngagement||0,"/2"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"bg-indigo-500 h-1.5 rounded-full",style:{width:"".concat((u.metadata.score_breakdown.seoEngagement||0)/2*100,"%")}})})]})]}),(0,a.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"Overall Quality Level:"}),(0,a.jsx)("span",{className:"text-xs font-semibold px-2 py-1 rounded ".concat(u.quality_score>=.9?"bg-green-100 text-green-800":u.quality_score>=.7?"bg-blue-100 text-blue-800":u.quality_score>=.4?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:u.quality_score>=.9?"\uD83C\uDFC6 Excellent":u.quality_score>=.7?"✨ Good":u.quality_score>=.4?"\uD83D\uDCDD Fair":"\uD83D\uDEA8 Poor"})]})}),u.metadata.score_breakdown.breakdown&&(0,a.jsxs)("div",{className:"pt-2 border-t border-gray-200",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"\uD83D\uDCD6 Readability Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Flesch Score:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:Math.round(u.metadata.score_breakdown.breakdown.fleschScore||0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Avg Words/Sentence:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:Math.round(u.metadata.score_breakdown.breakdown.avgWordsPerSentence||0)})]})]})]})]})]}),"pending"===u.status&&(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>updateStatus(u.id,"approved"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"✅ Approve"}),(0,a.jsx)("button",{onClick:()=>updateStatus(u.id,"rejected"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"❌ Reject"})]}),(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Details"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsxs)("p",{children:["Created: ",new Date(u.created_at).toLocaleString()]}),(0,a.jsxs)("p",{children:["Updated: ",new Date(u.updated_at).toLocaleString()]}),(0,a.jsxs)("p",{children:["ID: ",u.id]})]})]})]}):(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCCB"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Select an item from the queue to review"})]})})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"\uD83D\uDD12 Content Review Access"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter password to access the review dashboard"})]}),(0,a.jsxs)("div",{className:"mt-8 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",value:c,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleLogin(),className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter password"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:handleLogin,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"\uD83D\uDD13 Access Review Dashboard"})})]})]})})}},7823:function(e,s,t){"use strict";t.d(s,{O:function(){return r}});var a=t(5257);let r=(0,a.eI)("https://aulrmuonepdwxklhcaez.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF1bHJtdW9uZXBkd3hrbGhjYWV6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxMDUxOTIsImV4cCI6MjA3MTY4MTE5Mn0.oiaXgNNXx5U6rcZmxqT1gOTQqtVIUCSjMRr7AUTQM8Q")}},function(e){e.O(0,[849,971,472,744],function(){return e(e.s=4362)}),_N_E=e.O()}]);