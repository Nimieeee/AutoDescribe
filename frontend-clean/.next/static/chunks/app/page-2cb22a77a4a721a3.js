(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9196:function(e,t,s){Promise.resolve().then(s.bind(s,5721))},5721:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Dashboard}});var n=s(7437),a=s(2265),i=s(7823),r=s(1396),l=s.n(r),c=s(8098);function Dashboard(){let[e,t]=(0,a.useState)({total:0,pending:0,approved:0,rejected:0}),[s,r]=(0,a.useState)([]),[d,o]=(0,a.useState)(!0),{trackPageView:h,trackUserInteraction:u}=(0,c._)();(0,a.useEffect)(()=>{h(),loadDashboardData()},[]);let loadDashboardData=async()=>{try{let{data:e}=await i.O.from("generated_content").select("status");if(e){let s={total:e.length,pending:e.filter(e=>"pending"===e.status).length,approved:e.filter(e=>"approved"===e.status).length,rejected:e.filter(e=>"rejected"===e.status).length};t(s)}let{data:s}=await i.O.from("generated_content").select("\n          *,\n          products (sku, name, brand)\n        ").order("created_at",{ascending:!1}).limit(5);s&&r(s)}catch(e){console.error("Error loading dashboard:",e)}finally{o(!1)}};return d?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"AutoDescribe Dashboard"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"AI-powered product description generation and review"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"text-2xl",children:"\uD83D\uDCCA"}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Content"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.total})]})]})}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"text-2xl",children:"⏳"}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:e.pending})]})]})}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"text-2xl",children:"✅"}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Approved"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.approved})]})]})}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"text-2xl",children:"❌"}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Rejected"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-red-600",children:e.rejected})]})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,n.jsx)(l(),{href:"/generate",className:"bg-blue-600 hover:bg-blue-700 text-white rounded-lg p-6 block transition-colors",onClick:()=>u("click","generate_content_card",{source:"dashboard"}),children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"text-3xl mr-4",children:"✨"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-semibold",children:"Generate Content"}),(0,n.jsx)("p",{className:"text-blue-100",children:"Create new product descriptions with AI"})]})]})}),(0,n.jsx)(l(),{href:"/review",className:"bg-green-600 hover:bg-green-700 text-white rounded-lg p-6 block transition-colors",onClick:()=>u("click","review_content_card",{source:"dashboard"}),children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"text-3xl mr-4",children:"\uD83D\uDCCB"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-semibold",children:"Review Content"}),(0,n.jsx)("p",{className:"text-green-100",children:"Review and approve generated content"})]})]})})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Content"})}),(0,n.jsx)("div",{className:"divide-y divide-gray-200",children:0===s.length?(0,n.jsxs)("div",{className:"px-6 py-8 text-center text-gray-500",children:["No content generated yet. ",(0,n.jsx)(l(),{href:"/generate",className:"text-blue-600 hover:underline",children:"Generate your first content"})]}):s.map(e=>{var t,s;return(0,n.jsx)("div",{className:"px-6 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:(null===(t=e.products)||void 0===t?void 0:t.name)||"Unknown Product"}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["SKU: ",null===(s=e.products)||void 0===s?void 0:s.sku," • ",e.content_type]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]})]})},e.id)})})]})]})}},8098:function(e,t,s){"use strict";s.d(t,{_:function(){return useKPITracking}});let ClientKPITracker=class ClientKPITracker{getOrCreateSessionId(){let e=localStorage.getItem("kpi-session-id");return e||(e="client_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("kpi-session-id",e)),e}setupEventListeners(){this.trackPageView(),document.addEventListener("click",e=>{var t,s;let n=e.target;if("BUTTON"===n.tagName||n.closest("button")){let e="BUTTON"===n.tagName?n:n.closest("button");this.trackUserInteraction("click","button",{button_text:null==e?void 0:null===(t=e.textContent)||void 0===t?void 0:t.trim(),button_id:null==e?void 0:e.id,button_class:null==e?void 0:e.className})}if("A"===n.tagName||n.closest("a")){let e="A"===n.tagName?n:n.closest("a");this.trackUserInteraction("click","link",{link_text:null==e?void 0:null===(s=e.textContent)||void 0===s?void 0:s.trim(),link_href:null==e?void 0:e.href,link_id:null==e?void 0:e.id})}if("submit"===n.type){let e=n.closest("form");this.trackUserInteraction("submit","form",{form_id:null==e?void 0:e.id,form_class:null==e?void 0:e.className})}}),document.addEventListener("input",e=>{var t;let s=e.target;("search"===s.type||(null===(t=s.placeholder)||void 0===t?void 0:t.toLowerCase().includes("search")))&&(clearTimeout(s.searchTimeout),s.searchTimeout=setTimeout(()=>{this.trackUserInteraction("search_input","search_field",{query_length:s.value.length,has_query:s.value.length>0})},500))}),window.addEventListener("beforeunload",()=>{let e=Date.now()-this.startTime;this.trackUserInteraction("page_exit","page",{time_on_page_ms:e,page_url:window.location.pathname}),this.flushEvents()});let e=0;window.addEventListener("scroll",()=>{let t=Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100);t>e&&(e=t,t%25==0&&this.trackUserInteraction("scroll","page",{scroll_depth:t,page_url:window.location.pathname}))})}trackPageView(){this.trackEvent({type:"page_view",timestamp:new Date,sessionId:this.sessionId,metadata:{page_url:window.location.pathname,page_title:document.title,referrer:document.referrer,user_agent:navigator.userAgent,viewport_width:window.innerWidth,viewport_height:window.innerHeight}})}trackUserInteraction(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.trackEvent({type:"user_interaction",timestamp:new Date,sessionId:this.sessionId,metadata:{action:e,element:t,page:window.location.pathname,timestamp:Date.now(),...s}})}trackSearch(e,t,s){this.trackEvent({type:"search",timestamp:new Date,sessionId:this.sessionId,metadata:{query:e.length>50?"".concat(e.substring(0,50),"..."):e,query_length:e.length,results_count:t,response_time_ms:s,has_results:t>0}})}trackGenerationRequest(e,t){this.trackEvent({type:"generation_request",timestamp:new Date,sessionId:this.sessionId,metadata:{sku:e,content_type:t,page:window.location.pathname}})}trackEvent(e){this.isTracking&&(this.eventQueue.push(e),this.eventQueue.length>=10&&this.flushEvents())}async flushEvents(){if(0===this.eventQueue.length)return;let e=[...this.eventQueue];this.eventQueue=[];try{await fetch("/api/kpi/client-events",{method:"POST",headers:{"Content-Type":"application/json","X-Session-ID":this.sessionId},body:JSON.stringify({events:e})}),console.log("\uD83D\uDCCA Sent ".concat(e.length," client KPI events"))}catch(t){console.error("Error sending KPI events:",t),this.eventQueue.unshift(...e)}}setTracking(e){this.isTracking=e,e?console.log("\uD83D\uDCCA KPI tracking enabled"):console.log("\uD83D\uDCCA KPI tracking disabled")}getSessionInfo(){return{sessionId:this.sessionId,startTime:this.startTime,queueLength:this.eventQueue.length,isTracking:this.isTracking}}constructor(){this.eventQueue=[],this.isTracking=!0,this.sessionId=this.getOrCreateSessionId(),this.startTime=Date.now(),this.setupEventListeners()}};let n=null;function getKPITracker(){return n||(n=new ClientKPITracker),n}function useKPITracking(){let e=getKPITracker();return{trackPageView:()=>e.trackPageView(),trackUserInteraction:(t,s,n)=>e.trackUserInteraction(t,s,n),trackSearch:(t,s,n)=>e.trackSearch(t,s,n),trackGenerationRequest:(t,s)=>e.trackGenerationRequest(t,s),flushEvents:()=>e.flushEvents(),setTracking:t=>e.setTracking(t),getSessionInfo:()=>e.getSessionInfo()}}getKPITracker()},7823:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var n=s(5257);let a=(0,n.eI)("https://aulrmuonepdwxklhcaez.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF1bHJtdW9uZXBkd3hrbGhjYWV6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxMDUxOTIsImV4cCI6MjA3MTY4MTE5Mn0.oiaXgNNXx5U6rcZmxqT1gOTQqtVIUCSjMRr7AUTQM8Q")}},function(e){e.O(0,[849,396,971,472,744],function(){return e(e.s=9196)}),_N_E=e.O()}]);